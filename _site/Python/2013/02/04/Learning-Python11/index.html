
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>《Learning Python》学习笔记——11.while和for循环</title>
    
    <meta name="author" content="Flyaway">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/wiki/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/wiki/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/wiki/css/syntax.css?body=1" rel="stylesheet" type="text/css" media="all">
    <script type="text/javascript" src="/assets/themes/wiki/js/jquery-1.9.0.min.js"></script>
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="header row">
	<ul >
	  <li><a href="/">Home</a></li>
	  <li><a href="#">About</a></li>
	  <li><a href="http://zhouyichu.com">Blog</a></li>
	</ul>
    </div>

<div class="title row ">
 
《Learning Python》学习笔记——11.while和for循环

</div>


      <div class="content">
        

<h1 id="while">while循环</h1>

<p>while语句是Python语言中最通用的迭代结构，简而言之，只要顶端测试一直计算到真值，就会重复执行一个语句块。</p>

<h2 id="section">一般格式</h2>

<div class="highlight"><pre><code class="python3"><span class="k">while</span> <span class="o">&lt;</span><span class="n">test</span><span class="o">&gt;</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements1</span><span class="o">&gt;</span>
<span class="k">else</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements2</span><span class="o">&gt;</span>
</code></pre></div>

<h2 id="breakcontinuepasselse">break,continue,pass和循环else</h2>

<p><strong>break</strong></p>

<p>跳出最近所在的循环(跳过整个循环语句)。</p>

<p><strong>continue</strong></p>

<p>跳到最近所在循环的开头处(来到循环的首行)。</p>

<p><strong>pass</strong></p>

<p>什么事也不做，只是空占位符语句。</p>

<p><strong>循环else块</strong></p>

<p>只有当前循环正常离开时才会执行(也就是没有碰到break语句)</p>

<h2 id="section-1">一般循环格式</h2>

<p>加入break和continue语句后，while的一般格式变为:</p>

<div class="highlight"><pre><code class="python3"><span class="k">while</span> <span class="o">&lt;</span><span class="n">test1</span><span class="o">&gt;</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements1</span><span class="o">&gt;</span>
  <span class="k">if</span> <span class="o">&lt;</span><span class="n">test2</span><span class="o">&gt;</span><span class="p">:</span><span class="k">break</span>
  <span class="k">if</span> <span class="o">&lt;</span><span class="n">test3</span><span class="o">&gt;</span><span class="p">:</span><span class="k">continue</span>
<span class="k">else</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements2</span><span class="o">&gt;</span>
</code></pre></div>

<h2 id="pass">pass</h2>

<p>pass语句是无运算的占位符，当语法需要语句并且还没有任何实用的语句可写时，就可以使用它。</p>

<h2 id="else">循环else</h2>

<p>在while语句中加入else和C/C++中的语法不太一样，这里详细说明一下。else后面的代码只有当循环正常结束时才会执行，如果是用break跳出循环的，这部分代码就不会运行，具体看一个求质数的例子:</p>

<div class="highlight"><pre><code class="python3"><span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">//</span> <span class="mi">2</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">y</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="s">&#39;has factor&#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
    <span class="k">break</span>
  <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="s">&#39;is prime&#39;</span><span class="p">)</span>
</code></pre></div>

<p>再看一个对比的例子，没有使用else的情况:</p>

<div class="highlight"><pre><code class="python3"><span class="n">found</span><span class="o">=</span><span class="k">False</span>
<span class="k">while</span> <span class="n">x</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">matchx</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">&#39;Ni&#39;</span><span class="p">)</span>
    <span class="n">found</span><span class="o">=</span><span class="k">True</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s">&#39;not found&#39;</span><span class="p">)</span>
</code></pre></div>

<p>使用else后的情况:</p>

<div class="highlight"><pre><code class="python3"><span class="k">while</span> <span class="n">x</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">match</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s">&#39;Ni&#39;</span><span class="p">)</span>
    <span class="k">break</span>
<span class="k">else</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s">&#39;not found&#39;</span><span class="p">)</span>
</code></pre></div>

<h1 id="for">for循环</h1>

<p>for循环在Python中是一个通用的序列迭代器:可以遍历任何有序的序列对象内元素。for语句可以用于字符串、列表、元组、其他内置可迭代对象。</p>

<h2 id="section-2">一般格式</h2>

<div class="highlight"><pre><code class="python3"><span class="k">for</span> <span class="o">&lt;</span><span class="n">target</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements</span><span class="o">&gt;</span>
<span class="k">else</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">statements</span><span class="o">&gt;</span>
</code></pre></div>

<p>此处的else的作用和while语句中的一样。另外需要注意的是，当Python运行for循环时，会逐个将序列对象中的元素赋值给目标，然后为每个元素执行循环体。</p>

<h1 id="section-3">编写循环的技巧</h1>

<ul>
  <li>内置<strong>range</strong>函数:返回一系列连续增加的整数，可作为for中的索引</li>
  <li>内置<strong>zip</strong>函数:返回并行元素的元组的列表，可用于在for中遍历数个数列</li>
</ul>

<h2 id="whilerange">循环计数器:while和range</h2>

<p><strong>range</strong></p>

<p>当range函数只有一个参数时，会返回从零算起的整数列表，但其中不包括该参数的值。如果传进两个参数，那第一个参数是上边界，第二个参数是下边界。如果传进三个参数时，第三个参数表示步进值。</p>

<p>range提供了一种简单的方法，重复特定次数的动作:</p>

<div class="highlight"><pre><code class="python3"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;Pythons&#39;</span><span class="p">)</span>
</code></pre></div>

<p>相应的C++代码则是:</p>

<div class="highlight"><pre><code class="c++"><span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="s">&quot;Python&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="zipmap">并行遍历:zip和map</h2>

<p>zip会取得一个或多个序列为参数，然后返回元组的列表，将这些序列中的并排的元素配成对。</p>

<div class="highlight"><pre><code class="python3"><span class="n">L1</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">L2</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">L1</span><span class="p">,</span><span class="n">L2</span><span class="p">))</span>
</code></pre></div>

<p>上述代码的执行结果是:[(1,5),(2,6),(3,7),(4,8)]</p>

<p>当参数的长度不同时，zip会以最短序列的长度为准来截断所得到的元组。</p>

<p>使用zip构造字典:</p>

<div class="highlight"><pre><code class="python3"><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;spam&#39;</span><span class="p">,</span><span class="s">&#39;eggs&#39;</span><span class="p">,</span><span class="s">&#39;totast&#39;</span><span class="p">]</span>
<span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="n">values</span><span class="p">))</span>
</code></pre></div>

<h2 id="enumerate">产生偏移和元素:enumerate</h2>

<p>enumerate函数一个比较新的内置函数，它能同时返回元素值和偏移值:</p>

<div class="highlight"><pre><code class="python3"><span class="n">s</span><span class="o">=</span><span class="s">&#39;spam&#39;</span>
<span class="k">for</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span><span class="n">item</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="s">&#39;appears at offset&#39;</span><span class="p">,</span><span class="n">offset</span><span class="p">)</span>
</code></pre></div>




      </div>

      <footer >
        <p>&copy; Flyaway 2012 
		 Powered By <a href="http://www.vim.org">Vim</a> and <a href="http://jekyllrb.com">Jekyll</a> </p> </footer> 
  </body>
<script type="text/javascript">
	$("a[href^='http://']").each(function(){
		this.target="_blank";
	});
	$('h2').prepend('>>')
	$('h3').prepend('>>>')
	$(function(){
		$(".span12 h1").bind("click",function(){
			var $content=$(this).next();
			$content.slideToggle("slow");	
		})
	})
</script>
</html>

