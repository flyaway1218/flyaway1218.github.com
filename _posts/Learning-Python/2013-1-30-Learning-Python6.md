---
title: 《Learning Python》学习笔记——6.列表与字典
time: 2013-1-29
layout: post
category: Python
---
#列表#

列表是Python中最具灵活性的有序集合对象类型。与字符串不同的是，列表可以包含任何类型的对象:数字、字符串甚至其他列表。列表是可变对象，它支持原地修改的操作。

Python的列表是:

- 任意对象的有序集合
- 通过偏移读取
- 可变长度、异构以及任意嵌套
- 属于可变序列的分类
- 对象引用数组(列表中的存储的是对象的引用，而不是对象的拷贝)

#实际应用中的列表#

##基本列表操作##

由于列表是序列，它支持很多与字符串相同的操作。列表对"+"和"*"操作的响应与字符串很相似，两个操作的意思也是合并和重复，只不过是一个新的列表，而不是一个字符串。

##索引、分片和矩阵##

对于列表而言，索引和分片操作与字符串中的操作基本相同。然而对列表进行索引的结果就是你指定的偏移处的对象(不管是什么类型)，而对列表分片时往往返回一个新的列表。

{% highlight python %}
matrix = [[1,2,3],[4,5,6],[7,8,9]]
{% endhighlight %}

上述代码定义了一个3*3的二维矩阵。

##原处修改列表##

**索引与分片的赋值**

当使用列表的时候，可以将它赋值给一个特定项(偏移)或整个片段(分片)来改变它的内容，索引和分片的赋值都是原地修改，它们对列表进行直接修改，而不是生成一个新的列表作为结果.Python中的索引赋值与C及大多数其他语言极为相似——Python用一个新值取代指定偏移的对象引用

**列表方法的调用**

最常用的列表方法是append，它能够简单地将一个单项(对象引用)加至列表末端。与合并不同的是，append允许传入单一对象而不是列表。L.append(X)与L+[X]的结果类似，不同的是，前者会原地修改L，而后者会生成新的列表。
另一个比较常用的方法就是sort，它原地对列表进行排序。sort是使用Python标准的比较检验作为默认值(在这里指字符串比较)，而且以递增的顺序进行排序。另外，我们可以通过传入一个关键字参数来修改排序行为——这是指定按名称传递的函数调用中特殊的"name=value"语言。

需要注意的是:要当心append和sort是原地修改列表对象的，方法的返回结果并没有返回列表(从技术上讲，两者的返回值都是None)。如果编写类似`L=L.append(X)`的语句，将不会得到修改后的值(实际上，会失去整个列表的引用)。

- reverse:原地反转列表
- extend:在末端插入多个元素
- pop:删除最后一个元素，同时返回被删除的值
- remove:通过值删除某个元素
- insert:在偏移处插入某个元素
- index:查找某元素的偏移

#字典#

如果把列表看做是有序的对象集合，那么就可以把字典当成是无序的集合，它们主要的差别就在于:字典当中的元素师通过键来存取的，而不是通过偏移存取。
Python字典的主要属性如下:

- 通过键而不是偏移来读取
- 任意对象的无序集合
- 可变长、异构、任意嵌套
- 属于可变映射类型
- 对象引用表(散列表)(字典中的存储的是对象的引用，而不是对象的拷贝)

#实际应用中的字典#

##原处修改字典##

与列表相同，向字典中已存在的索引值赋值会改变与索引相关联的值。然而，与列表不同的是，每当对新字典键进行赋值(之前没有被赋值的键)，就会在字典内生成一个新的元素。

##其他字典的方法##

- keys:返回字典的键列表
- values:返回字典的值列表
- items:返回字典的(key,value)对元组
- update:合并
- pop:从字典中删除一个键并返回它的值

##字典用法注意事项##

- **序列运算无效**
- **对新索引赋值会添加项**
- **键不一定总是字符串**

##创建字典的其他方法##

{% highlight python %}
#Method1
D = {'name':'mel','age':45}
#Method2
D = {}
D['name']='mel'
D['age']=45
#Method3
D = dict(name='mel',age=45)
#Method4
D = dict([('name','mel'),('age',45)])
{% endhighlight %}

以上四种形式都会建立相同的字典。

##Python3.0中的字典变化##

字典的功能在Python3.0中已经有所变化了，具体来说，Python3.0中的字典:

- 支持一种新的字典解析表达式，这是列表和集合解析的"近亲"
- 对于D.key,D.values和D.items方法，返回可迭代的视图，而不是列表
- 由于前面一点，需要新的编码方式通过排序键来遍历
- 不再直接支持相对大小比较——取而代之的是手动比较
- 不再有D.has_key方法——相反，使用in成员关系测试

**字典视图**

在Python3.0中，字典的keys、values和items都返回视图对象，而在Python2.6中，它们返回实际的结果列表。Python3.0中的字典视图并非创建后不能改变，它们可以动态地反映在视图对象创建之后对字典做出点修改:

{% highlight python %}
D={'a':1,'b':2,'c':3}
K = D.keys()
V = D.values()
del D['b']
list(K)
{% endhighlight %}
上述代码中，最后一行的结果是['a','c']。

keys方法所返回的对象类似于集合，并且支持交集和并集等常见的操作；values视图不是这样，因为它们不是唯一的；但items结果是的，如果(key,value)对是唯一的并且可散列的话。

