---
title: 《Learning Python》学习笔记——7.元组、文件及其他
time: 2013-1-31
layout: post
category: Python
---

#元组#

元组由简单的对象构成。元组与列表非常类似，只不过元组不能再原处修改(它们是不可变的)，通常是写成圆括号(而不是方括号)中一系列项。它的属性有:

- 任意对象的有序集合
- 通过偏移存取
- 属于不可变序列类型
- 固定长度、异构、任意嵌套
- 对象引用的数组

##实际应用中的元组##

**元组的特殊语法:逗号和圆括号**

因为圆括号也可以把表达式括起来，如果圆括号里的单一对象时元组对象而不是一个简单的表达式，需要对Python进行特别说明。如果确实想得到一个元组，只要在这一单个元素之后、关闭圆括号之前加上一个逗号就可以了。

{% highlight python %}
x = (40)
y = (40,)
{% endhighlight %}
上述代码中，第一行的x是一个整数，第二行的y则是一个包含了一个元素40的元组。

**转换、方法以及不可变性**

元组的操作和字符串及列表是一致的，值得注意的区别在于"+"、"*"以及分片操作应用于元组时将返回新元组，并且元组不提供字符串、列表和字典中的方法。

##为什么有了列表还要元组##

元组的不可变性提供了某种完整性，这样你可以确保元组在程序中不会被另一个引用修改，而列表就没有这样的保证了。

#文件#

内置open函数后创建一个Python文件对象，可以作为计算机上的一个文件链接。在调用open之后，你可以通过调用返回的文件对象的方法来读写相关外部文件。

常见文件运算

|---------------------------------------+----------------------------------------------|
|  操作                                 |          解释                                |
|:--------------------------------------|:---------------------------------------------|
|  output=open(r'C:\spam','w')          |  创建输出文件('w'指写入)                     |
|  output=open('data','r')              |  创建只读文件('r'值只读)                     |
|  output=open('data')                  |  与上一行相同('r'是默认值)                   |
|  aString=intput.read()                |  把整个文件读进单一字符串                    |
|  aString=intput.read(N)               |  读取之后的N个字节(一或多个)到一个字符串中   |
|  aString=input.readline()             |  读取下一行(包括行末标识符)到一个字符串      |
|  aList=input.readlines()              |  读取整个文件到字符串列表                    |
|  output.write(aString)                |  写入字节字符串到文件                        |
|  output.writelines(alist)             |  把列表内所有字符串写入文件                  |
|  output.close()                       |  手动关闭(当文件收集完成时会替你关闭文件)    |
|  output.flush()                       |  把输出缓冲区刷到硬盘中，但不关闭文件        |
|  anyFile.seek(N)                      |  修改文件位置到偏移量N处，以便进行下一个操作 |
|  for line in open('data'):use line    |  文件迭代器一行一行地读取                    |
|  open('f.txt',encoding='latin-1')     |  Python3.0 Unicode文本文件(str字符串)        |
|  open('f.bin','rb')                   |  Python3.0 二进制byte文件(bytes字符串)　　　 |
|---------------------------------------+----------------------------------------------|

##打开文件##

为了打开一个文件，程序会调用内置open函数，首先是外部文件名，接着是处理模式。模式使用字符串'r'代表以只读方式打开文件(默认值)，'w'代表以写的方式打开文件，'a'代表追加模式。

##使用文件##

一旦存在一个文件对象，就可以调用其方法来读写相关的外部文件。不管在任何情况下，Python程序中的文本文件都采用字符串的形式，读取文件时会返回字符串形式的文本。

上面表格中的方法是子常用的读写方法，如下是一些基础用法的提示:

- 文件迭代器是最好的读取行的工具
- 内容是字符串，不是对象
  当你把数据写入文件时，Python不会自动把对象转换为字符串，你必须传递一个已经格式化的字符串。
- close是通常选项
- 文件是缓冲的并且是可查找的

##实际应用中的文件##

**用pickle存储Python的原生对象**

pickle模块是能够让我们直接在文件中存储几乎任何Python对象的高级工具，也并不要求我们把字符串转换来转换去，它就像是超集通用的数据格式化和解析工具。

#重访类型分类#

关于对象类型，有以下的一些药店需要记住:

- 对象根据分类共享操作；
- 只有可变对象(列表、字典和集合)可以原处修改，我们不能原处修改数字、字符串或元组
- 数字类型包括了:整数、浮点数、复数、小数和分数
- 集合类似于一个无值的字典的键，但是，它们不能映射为值，并且没有顺序；因此，集合不是一个映射类型或者一个序列类型，frozenset是集合的一个不可变的版本

|-----------------+-------------+--------------|
|  对象类型       |   分类      |  是否可变    |
|:----------------|:------------|:-------------|
|  数字           |   数值      |  否          |
|  字符串         |   序列      |  否          |
|  列表           |   序列      |  是          |
|  字典           |   对应      |  是          |
|  元组           |   序列      |  否          |
|  文件           |   扩展      |  N/A         |
|  Sets           |   集合      |  是          |
|  frozenset      |   集合      |  否          |   
|  bytearray(3.0) |   序列      |  是          |
|-----------------+-------------+--------------|

#引用 VS 拷贝#

引用的一大优点是:你可以在程序范围内任何地方传递大型对象而不必途中产生拷贝。

如果确实需要拷贝，有如下的方法:

- 没有限制条件的分片表达式(L[:])能够复制序列
- 字典copy方法(X.copy())能够复制字典
- 有些内置函数(例如:list)能够生成拷贝(list(L))
- copy标准库模块能够生成完整拷贝

关于拷贝还需要注意的是:无条件值的分片以及字典copy方法只能做顶层复制。也就是说，不能够复制嵌套的数据结构。如果需要一个深层嵌套的数据结构的完整的、完全独立的拷贝，那么就要使用标准的copy模块，包括`import copy`语句，并进行这样的拷贝:`x = copy.deepcopy(Y)`。

#比较、相等性和真值#

所有的Python对象也可以支持比较操作，测试相等性、相对大小等.Python的比较总是检查复合对象的所有部分，直到可以得出结果为止。事实上，当嵌套对象存在时，Python能够自动遍历数据结构，并从左到右递归地应用比较，要多深就走多深。过程中首次发现的差值将决定比较的结果。
有两种方式可以测试相等性:

- "=="操作符测试值的相等性。Python运行相等测试
- "is"表达式测试对象的一致性。Python测试二者是否是同一个对象

一般来说，Python中不同的类型的比较方法如下:

- 数字通过相对大小进行比较
- 字符串按照字典顺序，一个字符接一个字符地对比进行比较("abc"<"ac")
- 列表和元组从左到右对每部分进行比较
- 字典通过排序之后的(键、值)列表进行比较。
- 数字混合类型比较在Python3.0中是错误的

##Python中真和假的含义##

在Python中，整数0代表假，整数1代表真。

除此之外，Python也把任意的空数据结构视为假，把任何非空数据结构视为真。真和假的概念是Python中每个对象的固有属性:每个对象不是真就是假:

- 数字如果非零，则为真 
- 其他对象如果非空，则为真

**None对象**

Python还有一个特殊的对象:None，总被认为是假，一般都是起到一个空的占位作用

##Type对象##

事实上，即使是类型本身在Python中也是对象类型

