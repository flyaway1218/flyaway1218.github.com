---
layout: post
title: 《鸟哥的Linux私房菜:基础篇》学习笔记——5.Linux文件与目录管理
time: 2013-2-14
category: LinuxBase
---


#目录与路径#

##相对路径与绝对路径##

绝对路径:路径的写法一定由根目录/写起。

相对路径:路径的写法不是由/写起。

##目录的相关操作##

**特殊的目录**

|-------------+--------------------------------------|
|     符号    |                 意义                 |
|:------------|:-------------------------------------|
|      .      |  代表此层目录                        |
|      ..     |  代表上一层目录                      |
|      -      |  代表前一个工作目录                  |
|      ~      |  代表“目前用户身份”所在的主文件夹    |
|  ~account   |  代表account这个用户的主文件夹       |
|-------------+--------------------------------------|

常用的处理目录的命令:

- cd:切换目录
- pwd:显示当前目录
- mkdir:新建一个新的目录
- rmdir:删除一个空的目录

> 详细的命令解释与说明，可以参看《鸟哥基础篇》P163~165


##关于执行文件路径的变量:$PATH##

**结论**

- 不同身份用户默认的PATH不同，默认能够随意执行的命令也不同
- PATH是可以被修改的
- 本目录(.)最好不要被放置到PATH中


#文件与目录管理#


**cp**:复制文件或目录

参数说明:

- -p:连同文件的属性一起复制过去，而非使用默认属性(备份常用)
- -u:若destination比source旧才更新destination


#文件内容查阅#

- cat:由第一行开始显示文件内容
- tac:从最后一行开始显示，可以看出tac是cat的倒写形式
- nl:显示的时候，顺便输出行号
- more:一页一页地显示文件内容
- less:与more类似，但是比more更好的是，它可以往前翻页
- head:只看头几行
- tail:只看结尾几行
- od:以二进制的方式读取文件内容

##修改文件时间或创建新文件:touch##

文件的三个时间属性:

- modification time(mtime):当该文件的"内容数据"更改时，就会更新这个时间。内容数据指的是文件的内容，而不是文件的属性或权限。
- status time(ctime):当该文件的"状态"改变时，就会更新这个时间，举例来说，像是权限与属性被更改了，都会更新这个时间。
- access time(atime):当"该文件的内容被取用"时，就会更新这个读取时间。举例来说，我们使用cat读取文件，就会更新这个文件的atime。

**在默认情况下，ls显示出来的是该文件的mtime，也就是这个文件的内容上次被更改的时间**


touch最经常被使用的情况:

- 创建一个空的文件
- 将某个文件日期修改为目前日期(mtime和atime)



#文件与目录的默认权限与隐藏权限#

## 文件默认权限:umask ##

unmask指定:"目前用户在新建文件或目录时候的权限默认值"，unmask的分数指的是"该默认值需要减掉的权限"

默认情况下:

- 文件的默认权限:-rw-rw-rw-
- 目录的默认权限:drwdrwdrw

**注意:umask的分数是指该默认值需要减掉的权限**

举例:

- 新建文件时:(-rw-rw-rw-)-(-----w--w--)==>-rw-r--r--
- 新建目录时:(drwdrwdrw)-(d----w--w--)==>drwxr-xr-x

##文件隐藏属性chattr,lsattr##

- chattr:设置文件的隐藏属性
- lsattr:显示文件的隐藏属性

具体的属性说明请参见《鸟哥的基础篇》P183

比较重要的是:

- a:当设置a之后，这个文件就只能增加数据，而不能删除也不能修改数据，只有root才能设置这个属性
- i:i可以让一个文件"不能删除"、改名、设置连接也无法写入或添加数据。只有root才能设置这个属性


##文件特殊权限:SUID,SGID,SBIT##

**SetUID(SUID)**

- SUID权限仅对二进制程序有效
- 执行者对于该程序具有x的可执行权限
- 本权限仅在执行该程序过程中有效
- 执行者将具有该程序所有者的权限


**Set GID(SGID)**

- SGID对二进制程序有用
- 程序执行者对于该程序来说，需具备x的权限
- 执行者在执行的过程中将会获得该程序用户组的支持

**Sicky Bit(SBIT)**

- 当用户对于此目录具有w,x权限，即具有写入的权限时 
- 当用户在该目录下创建文件或目录时，仅有自己与root才有权力删除该文件

##查看文件类型:file##

可以通过file命令来查某个文件的基本数据


#命令与文件的查询#

##脚本文件名的查询##

which:寻找"执行文件"

which是根据PATH所规范的路径去查询"执行文件"的文件名


##文件名的查找##

- whereis:寻找特定文件(利用数据库查找,速度快)
- locate:依据/var/lib/mlocate内的数据库记载,找出用户输入的关键字文件名
- updatedb:根据/etc/updatedb.conf的设置去查找系统硬盘内的文件名，并更新/var/lib/mlocate内的数据库文件
- find:直接查找硬盘上的文件(速度慢)

