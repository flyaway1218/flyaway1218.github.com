---
layout: post
title: 《鸟哥的Linux私房菜:基础篇》学习笔记——4.Linux的文件权限与目录配置
time: 2013-2-14
category: LinuxBase
---


#用户与用户组#

**Linux用户身份与用户组记录的文件**

- 用户账号信息:/etc/passwd
- 个人密码:/etc/shadow
- 所有组名记录:/etc/group

#Linux文件权限概念#

##Linux文件属性##

|--------------+-----+--------+-------+--------+--------------+----------|
|      1       |  2  |    3   |   4   |    5   |     6        |    7     |
|:------------:|:---:|:------:|:-----:|:------:|:------------:|:--------:|
|  drwx------  |  3  |  root  |  root |  4096  |  Sep 5 0:37  |  .gconf  |
|--------------+-----+--------+-------+--------+--------------+----------|

对这七列信息的详细说明:

- 第一列代表这个文件的类型与权限(一共有10个字符)

  - 第一个字符代表这个文件是"目录、文件或链接文件"

    |-------+---------------------------------------|
    |  字符 |               说明                    |
    |:-----:|:--------------------------------------|
    |  [d]  |  目录 				    | 
    |  [-]  |  文件                                 |
    |  [\|] |  连接文件                             |
    |  [b]  |  设备文件里面的可供存储的接口设备     |
    |  [c]  |  设备文件里面的串行端口设备           |
    |-------+---------------------------------------|

  - 接下来的字符，以3个为一组，均是"rwx"的3个参数的组合。
		
    [r]:可读[read]
    [w]:可写[write]
    [x]:可执行[execute]

    **注意:这3个权限的位置不会改变，如果没有权限，就会出现减号[-]而已**

    - 第一组为"文件所有者的权限"
    - 第二组为"同用户组的权限"
    - 第三组为"其他非本用户组的权限"

- 第二列表示有多少文件名连接到此节点
  
  每个文件都会将它的权限与属性记录到文件系统的i-node中，不过我们使用的目录树却是使用文件名来记录，因此每个文件名就会连接到一个i-node。这个属性记录的就是有多少不同的文件名连接到同一个i-node号码。

- 第三列表示这个文件(或目录)的"所有者账号"

- 第四列表示这个文件的所属用户组

- 第五列为这个文件的大小，默认单位是B

- 第六列为这个文件的创建日期或是最近的修改日期

- 第七列为该文件名
  
	特殊情况:如果文件名之前多了个".",那么这个文件为"隐藏文件"。



##如何改变文件属性与权限##

- chgrp:改变文件所属用户组
- chown:改变文件所有者
- chmod:改变文件的权限

可以使用数字来表示各个权限:

- r:4
- w:2
- x:1

rwx = 4+2+1=7

r-x = 4+0+1=5

##目录与文件的权限意义##

文件权限对于一般文件和目录是不同的:

**文件的权限**

文件是实际含有数据的地方，包括一般文本文件、数据库内容文件、二进制可执行文件等。

- r:可读取此文件的实际内容，如读取文本文件的文字内容等。
- w:可以编辑、新增或者是修改该文件的内容(**但不含删除该文件**)
- x:该文件具有可以被系统执行的权限。

我们的文件是否能被执行则是由是否具有"x"这个权限来决定，而跟文件名是没有绝对的关系。


**目录的权限**

文件是存放实际数据的所在，目录主要的内容是记录文件名列表，文件名与目录有强烈的关联。

- r:表示具有读取目录结构列表的权限
- w:可写入的权限，对目录来说这是很强大的。因为它表示你具有更改目录结构列表的权限，也就是下面这些权限:

  - 新建的文件与目录 
  - 删除已经存在的文件与目录(不论该文件的权限如何)
  - 将已存在的文件或目录进行重命名
  - 转义该目录内的文件、目录位置

- x:表示用户能否进入该目录成为工作目录的用途

##Linux文件种类与扩展名##

**一个Linux文件能不能被执行，与它的第一列的10个属性有关，与文件名根本一点关系都没有。**


#Linux目录配置#

##Linux目录配置标准:FHS##

FHS:Filesystem Hierarchy Standard

FHS依据文件系统使用的频繁与否与是否允许用户随意改动，而将目录定义成为四种交互作用的形态：

|----------------------+----------------------------------------------------+-------------------------------------------|
|                      |                可分享的(shareable)                 |           不可分享的(unshareable)         |
|:---------------------|:---------------------------------------------------|:------------------------------------------|
|  不变的(static)      |  /usr(软件放置处)  /opt(第三方软件)                |  /etc(配置文件)  /boot(开机与内核文件)    |
|  可变动的(variable)  |  /var/mail(用户邮件信箱)  /var/spool/news(新闻组)  |  /var/rub(程序相关)  /var/lock(程序相关)  |
|----------------------+----------------------------------------------------+-------------------------------------------|

- **可分享的**:可以分享给其他系统挂在使用的目录
- **不可分享的**:自己机器上运行的设备文件或者是与程序有关的socket文件等
- **不变的**:一些不会经常变动的数据，例如函数库、文件说明文件、系统管理员所管理的主机服务配置文件等。
- **可变动的**:经常改变的数据，例如登陆文件、新闻组等。

FHS所定义的三个目录:

- /(root,根目录):与开机系统有关
- /usr(UNIX software resource):与软件安装/执行有关
- /var(variable):与系统运作过程有关

**根目录(/)的意义与内容**
FHS标准建议:根目录(/)所在分区越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能较好，根目录所在的文件系统也较不容易发生问题。


**注意**:开机过程中仅有根目录会被挂载，其他分区则是在完成之后才会进行挂载行为。所以有些目录不可与根目录分开，下面五个目录是不可与根目录分开的:

- /etc: 配置文件
- /bin: 重要执行文件
- /dev: 所需要的设备文件
- /lib: 执行文件所需的函数库与内核所需的模块
- /sbin: 重要的系统执行文件

**这个五个目录千万不可与根目录分开放在不同的分区**


**/usr的意义与内容**

FHS建议所有软件开发者应该将他们的数据合理地分别放置到这个目录下的子目录，而不要自行新建该软件自己独立的目录。


**/var的意义与内容**

/var目录主要针对常态性变动的文件，包括缓存(cache)、登录文件(log file)以及某些软件所产生的文件。


