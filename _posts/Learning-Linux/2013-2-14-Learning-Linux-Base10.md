---
layout: post
title: 《鸟哥的Linux私房菜:基础篇》学习笔记——10.正则表达式与文件格式化处理
time: 2013-2-14
category: LinuxBase
published: false
---


#前言:什么是正则表达式#

正则表达式就是处理字符串的方法，它是以行为单位来进行字符串的处理行为，正则表达式通过一些特殊符号的辅助，可以让用户轻易达到查找、删除、替换某特定字符串的处理程序
正则表达式基本上是一种"表示法"，只要工具程序支持这种表示法，那么该工具程序就可以用来作为正则表达式的字符串处理之用
正则表达式的字符串表示方式依照不同的严谨度而分为基础正则表达式与扩展正则表达式

**注意:正则表达式和通配符是完全不一样的东西，通配符代表的是bash接口的一个功能，而正则表达式则是一种字符串处理的表示方式**

#基础正则表达式#

既然正则表达式是处理字符串的一种表示方式，那么对字符排序有影响的语系数据就会对正则表达式的结果有影响！


##语系对正则表达式的影响##

使用正则表达式时，需要特别留意当时环境的语系为何，否则可能会发现与别人不相同的选取结果

特殊符号:

|-------------+-----------------------------------------------------------|
|  特殊符号   |                     代表意义                              |
|:-----------:|:---------------------------------------------------------:|
|  [:alnum:]  |  代表英文大小写字符及数字，即0-9,A-Z,a-z                  |
|  [:alpha:]  |  代表任何英文大小写字符，即A-Z,a-z                        |
|  [:blank:]  |  代表空格键与[Tab]键                                      |
|  [:cntrl:]  |  代表键盘上面的控制按键，即包括CR,LF,Tab,Del等            |
|  [:digit:]  |  代表数字而已,即0-9                                       |
|  [:graph:]  |  除了空格符(空格键与[Tab])外的其他所有按键                |
|  [:lower:]  |  代表小写字符，即a-z                                      |
|  [:print:]  |  代表任何可以被打印出来的字符                             |
|  [:punct:]  |  代表标点符号，即"'?!;:#$                                 |
|  [:upper:]  |  代表大写字符，即A-Z                                      |
|  [:space:]  |  任何产生空白的字符，包括空格键[Tab]CR等                  |
|  [:xdigit:] |  代表十六进制的数字类型，因此包括0-9,A-F,a-f的数字与字符  |
|-------------+-----------------------------------------------------------|

##基础正则表达式字符##

基础的正则表达式特殊字符
|---------+-------------------------------------------------------------------------------------------------------------|
|  RE字符 |                                 意义                                                                        |
|:-------:|:-----------------------------------------------------------------------------------------------------------:|
|  ^word  |  意义:待查找的字符串(word)在行首                                                                            |
|  word$  |  意义:待查找的字符串(word)在行尾                                                                            |
|  .      |  意义:代表一定有一个任意字符串                                                                              |
|  \      |  意义:转义字符，将特殊符号的特殊意义去除                                                                    |
|  *      |  意义:重复零个到无穷多个的前一个字符                                                                        |
| [list]  |  意义:从字符集合的RE字符里面找出想要选取的字符                                                              |
| [n1-n2] |  意义:从字符集合的RE字符里面找出想要选取的字符范围                                                          |
| [^list] |  意义:从字符集合的RE字符里面找出不要的字符串或范围                                                          |
| \{n,m\} |  意义:连续n到m个的前一个RE字符，若为\{n\}则是连续n个的前一个RE字符，若为\{n\}则是连续n个以上的前一个RE字符  |
|---------+-------------------------------------------------------------------------------------------------------------|


##sed工具##

sed本身也是一个管道命令，可以分析standard input的，而且sed还可以将数据进行替换、删除、新增、选取特定行的功能
具体使用方式详见《鸟哥》P357-360


**注意:grep+sed+正则表达式可以完成很多事情，值得深入学习！**


#扩展正则表达式#

|--------+-----------------------------------------|
| RE字符 |    意义与范例                           |
|:------:|:---------------------------------------:|
|   +    |  意义:重复一个或一个以上的前一个RE字符  |
|   ?    |  意义:零个或一个前一个RE字符            |
|   |    |  意义:用或(or)的方法找出数个字符串      |
|   ()   |  意义:找出"组"字符串                    |
|   ()+  |  意义:多个重复组的判别                  |
|--------+-----------------------------------------|

**注意:`!`在正则表达式中并不是特殊字符**


#文件的格式化与相关处理#

##格式化打印:printf##

可以使用`printf`命令来在屏幕上格式化输出数据，其用法和C语言中的`printf`函数差不多，事实上，C语言中就是的输出就是利用这边的`printf`命令实现的

##awk:好用的数据处理工具##

相比于`sed`常常作用于一整行的处理，`awk`则比较倾向于将一行分成数个"字段"来处理，`awk`主要是处理每一行的字段内的数据，而默认的字段的分隔符为空格键或[tab]按键

`awk`的运行模式:
awk '条件类型1{动作1}条件类型2{动作2}...' filename

`awk`的内置变量:

|------------+----------------------------------------------------|
|  变量名称  |          代表意义                                  |
|:----------:|:---------------------------------------------------|
|     NF     |  每一行($0)拥有的字段总数                          |
|     NR     |  目前`awk`所处理的是"第几行"数据                   |
|     FS     |  目前的分隔符，默认是空格键                        |
|     $n     |  代表每一行的第n个字段，其中$0代表一整行的数据     |
|------------+----------------------------------------------------|

##文件比较工具##

**`diff`**
`diff`就是用在比较两个文件之间的区别的，并且是以行为单位的来比较的。一般使用在ASCII纯文本文件的比较上，大部分情况下都是用在同一文件的新旧版本上

**`cmp`**
`cmp`主要也是比较两个文件，它主要利用"字节"单位去比较。

**`patch`**
`patch`主要是用来将就的文件升级成为新的文件，主要流程是这样的:先比较文件新旧版本的区别(`diff`命令)，并将区别文件制作成为补丁文件，再由补丁文件更新旧文件即可。

