---
title: 《Learning Python》学习笔记——3.数字
time: 2013-1-27
layout: post
category: Python
---

#Python的数字类型#

Python数字类型的完整工具包括:

- 整数和浮点数
- 复数
- 固定精度的十进制数
- 有理分数
- 集合
- 布尔类型
- 无穷的整数精度
- 各种数字内置函数和模块

##数字常量##

基本数字常量:

|-----------------------------------+-----------------------------------------------|
|  数字                             |   常量                                        |
|:----------------------------------|:----------------------------------------------|
|  1234,-24,0,99999999999           |   整数(无穷大小)                              |
|  1.23,1.,3.14e-10,4E210,4.0e+210  |   浮点数                                      |
|  0177,0x9ff,0b101010              |   Python2.6中的八进制、十六进制、二进制常量   |
|  0o177,0x9ff,0b101010             |   Python3.0中的八进制、十六进制、二进制常量   |
|  3+4j,3.0+4.0j,3j                 |   复数常量                                    |
|-----------------------------------+-----------------------------------------------|

##内置数学工具和扩展##

除了上述表格中的内置数字常量之外，Python还提供了一系列处理数字对象的工具:

**表达式操作符**

+,-,*,/,>>,**,&等

**内置数学函数**

pow,abs,round,int,hex,bin等

**公用模块**

random,math等

##Python表达式操作符##

Python表达式操作符及程序

|------------------------------+------------------------------------------------|
|  操作符                      |   描述                                         |
|:----------------------------:|:-----------------------------------------------|
|  yield x                     |  生成器函数发送协议                            |
|  lamdba args:expression      |  生成匿名函数                                  |
|  x if y else z               |  三元选择表达式                                |
|  x or y                      |  逻辑或(只有x为假，才会计算y)                  |
|  x and y                     |  逻辑与(只有x为真,才会计算y)                   |
|  not x                       |  逻辑非                                        |
|  x in y,x not in y           |  成员关系(可迭代对象、集合)                    |
|  x is y,x is not y           |  对象实体测试                                  |
|  x<y,x<=y,x>y,x>=y,x==y,x!=y |  大小比较，集合子集和超集相等性操作符          |
|  x \| y                       |  位或,集合并集                                 |
|  x ^ y                       |  位异或，集合对称差                            |
|  x & y                       |  位与,集合交集                                 |
|  x << y,x >> y               |  左移或右移y位                                 |
|  x + y,x -y                  |  加法/合并,减法,集合差集                       |
|  x * y,x % y,x / y,x // y    |  乘法/重复,余数/格式化,除法:整除法或floor除法  |
|  -x,+x                       |  一元减法，识别                                |
|  ~x                          |  按位求补(取反)                                |
|  x ** y                      |  幂运算                                        |
|  x[i]                        |  索引(序列、映射及其他)                        |
|  x[i:j:k]                    |  分片                                          |
|  x(...)                      |  调用(函数、方法、类及其他可调用的)            |
|  x.attr                      |  属性引用                                      |
|  (...)                       |  元组，表达式，生成器表达式                    |
|  [...]                       |  列表，列表解析                                |
|  {...}                       |  字典、集合、集合和字典解析                    |
|------------------------------+------------------------------------------------|

**混合操作所遵循的操作优先级**

- 在上表中，表中的操作符越是靠后的优先级越高，因此在混合表达式中要更加小心
- 表中位于同一行的表达式在组合的时候通常从左到右组合

**括号分组的子表达式**

如果用括号将表达式各部分进行分组的话，就可以完全忽略优先级的事情。

**混合类型的自动升级**

在混合类型的表达式中，Python首先将被操作的对象转换成其中最复杂的操作对象的类型，然后再对相同类型的的操作对象进行数学运算。
Python是这样划分数字类型的复杂度的:整数比浮点数简单，浮点数比复数简单。
另外需要注意的是，这些混合类型转换仅仅在将数字类型混合到一个表达式中的时候才使用。

#在实际应用中的数字#

##比较:一般的和连续的##

Python允许把多个比较连续起来执行范围测试，例如:

{% highlight python %}
X = 2
Y = 4
Z = 6
X < Y < Z      #相当于 X < Y and Y < Z
{% endhighlight %}

##除法:传统除法、Floor除法和真除法##

X / Y:

传统除法和真除法。在Python2.x中，这个操作对于整数会省去小数部分，对于浮点数会保持小数部分。在Python3.0中变成了真除法(无论任何类型都会保持小数部分)。

X // Y:

Floor除法。这个操作不考虑操作对象的类型，总会省略结果的小数部分，剩下最小的能整除的整数部分.针对整数返回一个整数，如果有任何一个操作数是浮点数，则返回一个浮点数。

##十六进制、八进制和二进制计数##

Python提供了很多内置函数进行进制的转换:

- oct():将十进制数转换为八进制数
- hex():将十进制数转换为十六进制数
- bin():将十进制数转换为二进制数
- int():将一个数字的字符串变换为一个整数，并且可以通过定义的第二个参数来确定按照哪个进制进行转换

{% highlight python %}
0o1,0o20,0o37             #八进制数
0x01,0x10,0xFF            #十六进制
0b1,0b10000,0b11111111    #二进制数
{% endhighlight %}

##位操作##

Python支持像C语言中那样的位操作。

##其他的内置数学工具##

除了核心对象类型外，Python还支持用于数字处理的内置函数和内置模块。例如内置函数pow和abs，分别计算幂和绝对值。

{% highlight python %}
import math
math.pi,math.e
math.sin(2*math.pi /180)
math.sqrt(144)
min(3,1,2,4),max(3,1,2,4)
{% endhighlight %}

在Python中有3中方法可以计算平方根:使用一个模块函数、一个表达式或一个内置函数。

{% highlight python %}
import math
math.sqrt(144)   #函数模块
144 ** .5	 #表达式
pow(144,.5)      #内置函数
{% endhighlight %}

另外需要注意的是random模块，可以用来产生一个0和1之间的随机数。

{% highlight python %}
import random
random.random()
random.randint()
random.choice(['Life of Brian','Holy Grail','Meaning of Life'])
{% endhighlight %}

#其他数字类型#

##小数数字##

Python2.4开始引进了一个新的核心数据对象:小数对象。它比其他数据类型要复杂一些，小数是通过一个导入的模块调用函数后创建的，而不是通过运行常量表达式创建的。从功能上来说，小数对象就像浮点数，只不过它们有固定的位数和小数点，因此小数是有固定的精度的浮点值。

{% highlight python %}
0.1+0.1+0.1-0.3
print(0.1+0.1+0.1-0.3)
from decimal import Decimal
Decimal('0.1')+Decimal('0.1')+Decimal('0.1')-Decimal('0.3')
{% endhighlight %}

在上面的代码中，第一和第二行的结果都是5.5511151231257827e-17，因为与硬件相关的浮点数运算在精度方面有内在的缺陷,不过使用小数对象时，就能改正，最后一行的结果是Decimal('0.0')。

**设置全局精度**

decimal模块中的其他工具可以用来设置所有小数数值的精度、设置错误处理等。

{% highlight python %}
import decimal
decimal.getcontext().prec=4
decimal.Decimal(1) / decimal.Decimal(7)
{% endhighlight %}

以上代码返回的结果是Decimal('0.1429')。
这对于处理货币应用程序非常有用。

##分数类型##

Python3.0引入了一个新的数字类型——分数，它实现了一个有理数对象。它明确地保留一个分子和一个分母，从而避免了浮点数学的某些不精确性和局限性。

{% highlight python %}
from frations import Fraction
x = Fraction(1,3)
y = Fraction(4,6)
{% endhighlight %}

##集合##
这是一些唯一的、不可变的对象的一个无序集合(collection),这些操作支持与数学集合理论相对应的操作。可以把集合看成一个没有键的字典。
可以使用如下的方式创建一个集合。
{% highlight python %}
x = set('abcde')
y = {'a','b','c','d','e'}
{% endhighlight %}
但是要创建一个空的字典，必须使用内置函数set,因为{}代表的是一个空的字典。

**不可变限制和冻结集合**

很大程度上由于其实现，集合只能包含不可变的对象类型。因此，列表和字典不能嵌入到集合中去。但是，如果需要存储复合值的话，元组是可以嵌入的。
集合本身也是不可变的，所以不能直接嵌入到其他集合中，如果需要在另一个集合中存储一个集合，可以像调用set一样来调用frozenset，但是，它创建一个不可变的集合，该集合不可修改并且可以嵌套到其他集合中。


##布尔型##

True---------1
False---------0

#数字扩展#

尽管Python的核心数字类型提供的功能对于大多数应用程序已经够用了，还是有大量的第三方开源扩展可以用来解决更加专门的需求。
比如有一个叫做NumPy(Numeric Python)的Python扩展提供了高级的数字编工具，例如矩阵数据类型、向量处理和高级的计算库。像Los Alamos和NASA这样的核心科学编程组织，使用带有NumPy的Python来实现此前用C++、FORTRAN、Matlab编写的任务。Python和NumPy的组合往往可以比作是一款免费的、更加灵活的的Matlab。

